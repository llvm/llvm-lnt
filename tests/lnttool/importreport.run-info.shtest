#
# Ensure that we can pass additional run information with `lnt importreport`.
#

# Pass one run information.
#
# RUN: lnt importreport --testsuite nts --order 123 --machine foo --run-info commit=abc123 %S/Inputs/example_metrics.lnt %t.1.json
# RUN: filecheck --check-prefix=CHECK-1 --input-file %t.1.json %s
# CHECK-1:        {
# CHECK-1-NEXT:       "format_version": "2",
# CHECK-1-NEXT:       "machine": {
# CHECK-1-NEXT:           "name": "foo"
# CHECK-1-NEXT:       },
# CHECK-1-NEXT:       "run": {
# CHECK-1-NEXT:           "commit": "abc123",
# CHECK-1-NEXT:           "end_time": "{{.+}}",
# CHECK-1-NEXT:           "llvm_project_revision": "123",
# CHECK-1-NEXT:           "start_time": "{{.+}}"
# CHECK-1-NEXT:       },
# CHECK-1-NEXT:       "tests": [
# CHECK-1-NEXT:           {
# CHECK-1-NEXT:               "execution_time": [
# CHECK-1-NEXT:                   10.0,
# CHECK-1-NEXT:                   11.0
# CHECK-1-NEXT:               ],
# CHECK-1-NEXT:               "hash": "d7",
# CHECK-1-NEXT:               "name": "foo"
# CHECK-1-NEXT:           },
# CHECK-1-NEXT:           {
# CHECK-1-NEXT:               "execution_time": 20.0,
# CHECK-1-NEXT:               "name": "bar",
# CHECK-1-NEXT:               "profile": "Xz6/"
# CHECK-1-NEXT:           }
# CHECK-1-NEXT:       ]
# CHECK-1-NEXT:   }

# Pass multiple run informations.
#
# RUN: lnt importreport --testsuite nts --order 123 --machine foo \
# RUN:                      --run-info commit=abc123 --run-info load_factor="10%" --run-info something_else="info" \
# RUN:                      %S/Inputs/example_metrics.lnt %t.2.json
# RUN: filecheck --check-prefix=CHECK-2 --input-file %t.2.json %s
# CHECK-2:        {
# CHECK-2-NEXT:       "format_version": "2",
# CHECK-2-NEXT:       "machine": {
# CHECK-2-NEXT:           "name": "foo"
# CHECK-2-NEXT:       },
# CHECK-2-NEXT:       "run": {
# CHECK-2-NEXT:           "commit": "abc123",
# CHECK-2-NEXT:           "end_time": "{{.+}}",
# CHECK-2-NEXT:           "llvm_project_revision": "123",
# CHECK-2-NEXT:           "load_factor": "10%",
# CHECK-2-NEXT:           "something_else": "info",
# CHECK-2-NEXT:           "start_time": "{{.+}}"
# CHECK-2-NEXT:       },
# CHECK-2-NEXT:       "tests": [
# CHECK-2-NEXT:           {
# CHECK-2-NEXT:               "execution_time": [
# CHECK-2-NEXT:                   10.0,
# CHECK-2-NEXT:                   11.0
# CHECK-2-NEXT:               ],
# CHECK-2-NEXT:               "hash": "d7",
# CHECK-2-NEXT:               "name": "foo"
# CHECK-2-NEXT:           },
# CHECK-2-NEXT:           {
# CHECK-2-NEXT:               "execution_time": 20.0,
# CHECK-2-NEXT:               "name": "bar",
# CHECK-2-NEXT:               "profile": "Xz6/"
# CHECK-2-NEXT:           }
# CHECK-2-NEXT:       ]
# CHECK-2-NEXT:   }
